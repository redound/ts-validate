var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},TSValidate;!function(a){var b=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(TSCore.Exception.Exception);a.Exception=b}(TSValidate||(TSValidate={}));var TSValidate;!function(a){var b=function(){function a(a,b,c,d){void 0===c&&(c=null),void 0===d&&(d=null),this._message=a,this._field=b,this._type=c,this._code=d}return a.prototype.setType=function(a){return this._type=a,this},a.prototype.getType=function(){return this._type},a.prototype.setMessage=function(a){return this._message=a,this},a.prototype.getMessage=function(){return this._message},a.prototype.setField=function(a){return this._field=a,this},a.prototype.toString=function(){return this._message},a}();a.Message=b}(TSValidate||(TSValidate={}));var TSValidate;!function(a){var b=function(){function a(a){void 0===a&&(a={}),this._options=a}return a.prototype.isEmpty=function(a){return""===a||_.isNull(a)},a.prototype.hasOption=function(a){return!_.isUndefined(this._options[a])},a.prototype.getOption=function(a,b){return void 0===b&&(b=null),this.hasOption(a)?this._options[a]:b},a.prototype.setOption=function(a,b){this._options[a]=b},a.prototype.label=function(a){return this._label=a,this},a.prototype.getLabel=function(){return this._label},a.prototype.message=function(a){return this._message=a,this},a.prototype.getMessage=function(){return this._message},a.prototype.validate=function(a,b){return!1},a}();a.Validator=b}(TSValidate||(TSValidate={}));var TSValidate;!function(a){var b;!function(b){var c=a.Validator,d=a.Message,e=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.validate=function(a,b){var c,e,f,g,h,i;return c=a.getValue(b),e=this.getMinimum(),f=this.getMaximum(),this.allowEmpty()&&this.isEmpty(c)?!0:e>c||c>f?(h=this.getLabel(),h||a.getLabel(b),g=this.getMessage(),i=[":field",h,":min",e,":max",f],g||(g=a.getDefaultMessage("Between")),g.replace(i[0],i[1]),g.replace(i[1],i[2]),g.replace(i[3],i[4]),a.appendMessage(new d(g,b,"Between")),!1):!0},b.prototype.allowEmpty=function(a){return void 0===a&&(a=!0),this._allowEmpty=a,this},b.prototype.minimum=function(a){return this._minimum=a,this},b.prototype.getMinimum=function(){return this._minimum},b.prototype.maximum=function(a){return this._maximum=a,this},b.prototype.getMaximum=function(){return this._maximum},b}(c);b.Between=e}(b=a.Validators||(a.Validators={}))}(TSValidate||(TSValidate={}));var TSValidate;!function(a){var b;!function(b){var c=a.Validator,d=a.Message,e=function(a){function b(){a.apply(this,arguments),this._ignoreCase=!1}return __extends(b,a),b.prototype.validate=function(a,b){var c,e,f,g,h,i,j;return c=this.getAgainst(),e=a.getValue(b),f=a.getValue(c),this.compare(e,f)?!0:(h=this.getLabel(),h||(h=a.getLabel(b)),i=this.getLabelAgainst(),i||(i=a.getLabel(c)),g=this.getMessage(),j=[":field",h,":against",i],g||(g=a.getDefaultMessage("Confirmation")),g.replace(j[0],j[1]),g.replace(j[2],j[3]),a.appendMessage(new d(g,b,"Confirmation")),!1)},b.prototype.compare=function(a,b){return void 0===a&&(a=""),void 0===b&&(b=""),this.getIgnoreCase()?a.toLowerCase()===b.toLowerCase():a===b},b.prototype.ignoreCase=function(a){return void 0===a&&(a=!0),this._ignoreCase=a,this},b.prototype.getIgnoreCase=function(){return this._ignoreCase},b.prototype.against=function(a){return this._against=a,this},b.prototype.getAgainst=function(){return this._against},b.prototype.labelAgainst=function(a){return this._labelAgainst=a,this},b.prototype.getLabelAgainst=function(){return this._labelAgainst},b}(c);b.Confirmation=e}(b=a.Validators||(a.Validators={}))}(TSValidate||(TSValidate={}));var TSValidate;!function(a){var b;!function(b){var c=a.Validator,d=a.Message,e=function(a){function b(){a.apply(this,arguments),this._allowEmpty=!1}return __extends(b,a),b.prototype.validate=function(a,c){var e,f,g,h;return e=a.getValue(c),this.getAllowEmpty()&&this.isEmpty(e)?!0:b.EMAIL_REGEX.test(e)?!0:(g=this.getLabel(),g||(g=a.getLabel(c)),f=this.getMessage(),h=[":field",c],f||(f=a.getDefaultMessage("Email")),a.appendMessage(new d(f.replace(h[0],h[1]),c,"Email")),!1)},b.prototype.allowEmpty=function(a){return void 0===a&&(a=!0),this._allowEmpty=a,this},b.prototype.getAllowEmpty=function(){return this._allowEmpty},b.EMAIL_REGEX=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,b}(c);b.Email=e}(b=a.Validators||(a.Validators={}))}(TSValidate||(TSValidate={}));var TSValidate;!function(a){var b;!function(b){var c=a.Validator,d=a.Message,e=function(b){function c(){b.apply(this,arguments),this._strict=!1,this._allowEmpty=!1}return __extends(c,b),c.prototype.validate=function(b,c){var e,f,g,h,i,j;if(e=b.getValue(c),this.getAllowEmpty()&&this.isEmpty(e))return!0;if(f=this.getDomain(),!_.isArray(f))throw new a.Exception("Option `domain` must be an array");return j=this.getStrict(),this.inArray(e,f,j)?(h=this.getLabel(),h||(h=b.getLabel(c)),g=this.getMessage(),i=[":field",h,":domain",f.join(", ")],g||(g=b.getDefaultMessage("ExclusionIn")),g=g.replace(i[0],i[1]),g=g.replace(i[2],i[3]),b.appendMessage(new d(g,c,"ExclusionIn")),!1):!0},c.prototype.inArray=function(a,b,c){var d=this;void 0===c&&(c=!1);var e=!1;return _.each(b,function(b){d.compare(b,a,c)&&(e=!0)}),e},c.prototype.compare=function(a,b,c){return _.isObject(a)&&_.isObject(b)?c?JSON.stringify(a)===JSON.stringify(b):JSON.stringify(a)==JSON.stringify(b):c?a===b:a==b},c.prototype.strict=function(a){return void 0===a&&(a=!0),this._strict=a,this},c.prototype.getStrict=function(){return this._strict},c.prototype.allowEmpty=function(a){return void 0===a&&(a=!0),this._allowEmpty=a,this},c.prototype.getAllowEmpty=function(){return this._allowEmpty},c.prototype.domain=function(a){return this._domain=a,this},c.prototype.getDomain=function(){return this._domain},c}(c);b.ExclusionIn=e}(b=a.Validators||(a.Validators={}))}(TSValidate||(TSValidate={}));var TSValidate;!function(a){var b;!function(b){var c=a.Validator,d=a.Message,e=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.validate=function(a,b){var c,e,f,g,h;return g=a.getValue(b),this.getAccepted()?h=this.getAccepted()==g:this.getValue()&&(h=this.getValue()===g),h?!0:(e=this.getLabel(),e||a.getLabel(b),c=this.getMessage(),f=[":field",e],c||(c=a.getDefaultMessage("Identical")),a.appendMessage(new d(c.replace(f[0],f[1]),b,"Identical")),!1)},b.prototype.accepted=function(a){return this._accepted=a,this},b.prototype.getAccepted=function(){return this._accepted},b.prototype.value=function(a){return this._value=a,this},b.prototype.getValue=function(){return this._value},b}(c);b.Identical=e}(b=a.Validators||(a.Validators={}))}(TSValidate||(TSValidate={}));var TSValidate;!function(a){var b;!function(b){var c=a.Validator,d=a.Message,e=function(b){function c(){b.apply(this,arguments),this._strict=!1,this._allowEmpty=!1}return __extends(c,b),c.prototype.validate=function(b,c){var e,f,g,h,i,j;if(e=b.getValue(c),this.getAllowEmpty()&&this.isEmpty(e))return!0;if(f=this.getDomain(),!_.isArray(f))throw new a.Exception("Option `domain` must be an array");return j=this.getStrict(),this.inArray(e,f,j)?!0:(h=this.getLabel(),h||(h=b.getLabel(c)),g=this.getMessage(),i=[":field",h,":domain",f.join(", ")],g||(g=b.getDefaultMessage("ExclusionIn")),g=g.replace(i[0],i[1]),g=g.replace(i[2],i[3]),b.appendMessage(new d(g,c,"ExclusionIn")),!1)},c.prototype.inArray=function(a,b,c){var d=this;void 0===c&&(c=!1);var e=!1;return _.each(b,function(b){d.compare(b,a,c)&&(e=!0)}),e},c.prototype.compare=function(a,b,c){return _.isObject(a)&&_.isObject(b)?c?JSON.stringify(a)===JSON.stringify(b):JSON.stringify(a)==JSON.stringify(b):c?a===b:a==b},c.prototype.strict=function(a){return void 0===a&&(a=!0),this._strict=a,this},c.prototype.getStrict=function(){return this._strict},c.prototype.allowEmpty=function(a){return void 0===a&&(a=!0),this._allowEmpty=a,this},c.prototype.getAllowEmpty=function(){return this._allowEmpty},c.prototype.domain=function(a){return this._domain=a,this},c.prototype.getDomain=function(){return this._domain},c}(c);b.InclusionIn=e}(b=a.Validators||(a.Validators={}))}(TSValidate||(TSValidate={}));var TSValidate;!function(a){var b;!function(b){var c=a.Validator,d=a.Message,e=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.validate=function(a,b){var c,e,f,g;if(c=a.getValue(b),_.isNull(c)||this.isEmpty(c)){var f=this.getLabel();return f||(f=a.getLabel(b)),e=this.getMessage(),g=[":field",f],e||(e=a.getDefaultMessage("PresenceOf")),a.appendMessage(new d(e.replace(g[0],g[1]),b,"PresenceOf")),!1}return!0},b}(c);b.PresenceOf=e}(b=a.Validators||(a.Validators={}))}(TSValidate||(TSValidate={}));var TSValidate;!function(a){var b;!function(b){var c=a.Validator,d=a.Message,e=function(b){function c(){b.apply(this,arguments),this._allowEmpty=!1}return __extends(c,b),c.prototype.validate=function(b,c){var e,f,g,h,i,j;if(e=null,h=b.getValue(c),this.getAllowEmpty()&&this.isEmpty(h))return!0;if(!this.getPattern())throw new a.Exception("No pattern set");return f=this.getPattern(),f.test(h)?!0:(i=this.getLabel(),i||(i=b.getLabel(c)),g=this.getMessage(),j=[":field",i],g||b.getDefaultMessage("Regex"),b.appendMessage(new d(g.replace(j[0],j[1]),c,"Regex")),!1)},c.prototype.allowEmpty=function(a){return void 0===a&&(a=!0),this._allowEmpty=a,this},c.prototype.getAllowEmpty=function(){return this._allowEmpty},c.prototype.pattern=function(a){return this._pattern=a,this},c.prototype.getPattern=function(){return this._pattern},c}(c);b.Regex=e}(b=a.Validators||(a.Validators={}))}(TSValidate||(TSValidate={}));var TSValidate;!function(a){var b;!function(b){var c=a.Validator,d=a.Message,e=function(b){function c(){b.apply(this,arguments),this._allowEmpty=!1}return __extends(c,b),c.prototype.validate=function(b,c){var e,f,g,h,i,j,k,l,m;if(e=!_.isUndefined(this.getMin()),f=!_.isUndefined(this.getMax()),!e&&!f)throw new a.Exception("A minimum or maximum must be set");return g=b.getValue(c),this.getAllowEmpty()&&this.isEmpty(g)?!0:(l=this.getLabel(),l||(l=b.getLabel(c)),h=0,_.isString(g)&&(h=g.length),f&&(k=this.getMax(),h>k)?(i=this.getMessageMaximum(),m=[":field",l,":max",k],i||(i=b.getDefaultMessage("TooLong")),i.replace(m[0],m[1]),i.replace(m[2],m[3]),b.appendMessage(new d(i,c,"TooLong")),!1):e&&(j=this.getMin(),j>h)?(i=this.getMessageMinimum(),m=[":field",l,":min",j],i||(i=b.getDefaultMessage("TooShort")),i.replace(m[0],m[1]),i.replace(m[1],m[2]),b.appendMessage(new d(i,c,"TooShort")),!1):!0)},c.prototype.allowEmpty=function(a){return void 0===a&&(a=!0),this._allowEmpty=a,this},c.prototype.getAllowEmpty=function(){return this._allowEmpty},c.prototype.min=function(a){return this._min=a,this},c.prototype.getMin=function(){return this._min},c.prototype.max=function(a){return this._max=a,this},c.prototype.getMax=function(){return this._max},c.prototype.messageMinimum=function(a){return this._messageMinimum=a,this},c.prototype.getMessageMinimum=function(){return this._messageMinimum},c.prototype.messageMaximum=function(a){return this._messageMaximum=a,this},c.prototype.getMessageMaximum=function(){return this._messageMaximum},c}(c);b.StringLength=e}(b=a.Validators||(a.Validators={}))}(TSValidate||(TSValidate={}));var TSValidate;!function(a){var b;!function(b){var c=a.Validator,d=a.Message,e=function(a){function b(){a.apply(this,arguments),this._allowEmpty=!1}return __extends(b,a),b.prototype.validate=function(a,c){var e,f,g,h;return e=a.getValue(c),this.getAllowEmpty()&&this.isEmpty(e)?!0:b.URL_REGEX.test(e)?!0:(g=this.getLabel(),g||(g=a.getLabel(c)),f=this.getMessage(),h=[":field",g],f||(f=a.getDefaultMessage("Url")),f.replace(h[0],h[1]),a.appendMessage(new d(f,c,"Url")),!1)},b.prototype.allowEmpty=function(a){return void 0===a&&(a=!0),this._allowEmpty=a,this},b.prototype.getAllowEmpty=function(){return this._allowEmpty},b.URL_REGEX=/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/,b}(c);b.Url=e}(b=a.Validators||(a.Validators={}))}(TSValidate||(TSValidate={}));var TSValidate;!function(a){var b=a.Validators.Between,c=a.Validators.Confirmation,d=a.Validators.Email,e=a.Validators.ExclusionIn,f=a.Validators.Identical,g=a.Validators.InclusionIn,h=a.Validators.PresenceOf,i=a.Validators.Regex,j=a.Validators.StringLength,k=a.Validators.Url,l=function(){function l(){this._validators=new TSCore.Data.Dictionary,this._messages=new TSCore.Data.Collection,this._labels=new TSCore.Data.Dictionary}return l.prototype.construct=function(a){this._validators=a,this.setDefaultMessages(),this.initialize()},l.prototype.initialize=function(){},l.prototype.beforeValidation=function(a,b,c){},l.prototype.afterValidation=function(a,b,c){},l.prototype.validate=function(b,c){var d=this;void 0===b&&(b=null),void 0===c&&(c=null);var e,f,g;if(f=new TSCore.Data.Collection,e=this._validators,e.isEmpty())throw new a.Exception("There are no validators to validate");return this._values=null,_.isNull(c)||(this._entity=c),g=this.beforeValidation(b,c,f),g===!1?f:(this._messages=f,(_.isArray(b)||_.isObject(b))&&(this._data=b),e.each(function(b,c){if(!(c instanceof a.Validator))throw new a.Exception("One of the validators is not valid");return c.validate(d,b)===!1&&c.getOption("cancelOnFail")?f:void 0}),f=this._messages,this.afterValidation(b,c,f),f)},l.prototype.add=function(a,b){return this._validators.set(a,b),this},l.prototype.presenceOf=function(a,b){return this.add(a,(new h).message(b)),this},l.prototype.identical=function(a,b,c){return void 0===b&&(b=!0),this.add(a,(new f).accepted(b).message(c)),this},l.prototype.email=function(a,b){return this.add(a,(new d).message(b)),this},l.prototype.exclusionIn=function(a,b,c){return this.add(a,(new e).domain(b).message(c)),this},l.prototype.inclusionIn=function(a,b,c){return this.add(a,(new g).domain(b).message(c)),this},l.prototype.regex=function(a,b,c){return this.add(a,(new i).pattern(b).message(c)),this},l.prototype.stringLength=function(a,b,c,d,e){return this.add(a,(new j).min(b).max(c).messageMinimum(d).messageMaximum(e)),this},l.prototype.between=function(a,c,d,e){return this.add(a,(new b).minimum(c).maximum(d).message(e)),this},l.prototype.confirmation=function(a,b,d){return this.add(a,(new c).against(b).message(d)),this},l.prototype.url=function(a,b){return this.add(a,(new k).message(b)),this},l.prototype.rule=function(a,b){return this.add(a,b)},l.prototype.rules=function(b,c){var d=this;return void 0===c&&(c=[]),_.each(c,function(c){c instanceof a.Validator&&d._validators.set(b,c)}),this},l.prototype.getValidators=function(){return this._validators},l.prototype.getEntity=function(){return this._entity},l.prototype.setDefaultMessages=function(a){void 0===a&&(a={});var b={Alnum:"Field :field must contain only letters and numbers",Alpha:"Field :field must contain only letters",Between:"Field :field must be within the range of :min to :max",Confirmation:"Field :field must be the same as :against",Digit:"Field :field must be numeric",Email:"Field :field must be an email address",ExclusionIn:"Field :field must not be a part of list: :domain",FileEmpty:"Field :field must not be empty",FileIniSize:"File :field exceeds the maximum file size",FileMaxResolution:"File :field must not exceed :max resolution",FileMinResolution:"File :field must be at least :min resolution",FileSize:"File :field exceeds the size of :max",FileType:"File :field must be of type: :types",FileValid:"Field :field is not valid",Identical:"Field :field does not have the expected value",InclusionIn:"Field :field must be a part of list: :domain",Numericality:"Field :field does not have a valid numeric format",PresenceOf:"Field :field is required",Regex:"Field :field does not match the required format",TooLong:"Field :field must not exceed :max characters long",TooShort:"Field :field must be at least :min characters long",Uniqueness:"Field :field must be unique",Url:"Field :field must be a url",CreditCard:"Field :field is not valid for a credit card number"};return this._defaultMessages=_.extend(b,a)},l.prototype.getDefaultMessage=function(a){return _.isUndefined(this._defaultMessages[a])?"":this._defaultMessages[a]},l.prototype.getMessages=function(){return this._messages.clone()},l.prototype.setLabels=function(a){this._labels=a},l.prototype.getLabel=function(a){return this._labels.get(a)},l.prototype.appendMessage=function(a){return this._messages.add(a),this},l.prototype.bind=function(b,c){if(!_.isObject(b))throw new a.Exception("Entity must be an object");if(!_.isObject(c))throw new a.Exception("Data to validate must be an object");return this._entity=b,this._data=c,this},l.prototype.getValue=function(b){var c,d,e,f,g;if(c=this._entity,_.isObject(c))return d="get"+b,e=c[d]instanceof Function?c[d]():c.get instanceof Function?c.get(b):_.isUndefined(c[b])?null:c[b];if(f=this._data,!_.isObject(f))throw new a.Exception("There is no data to validate");return g=this._values,g&&!_.isUndefined(g[b])?g[b]:(e=null,_.isUndefined(f[b])?e:f[b])},l}();a.Validation=l}(TSValidate||(TSValidate={}));